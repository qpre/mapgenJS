var MG={lib:{graph:{},math:{}}};((function(){MG.lib.math.PMPRNG=function(){function a(){var a;a=1}return a.prototype.nextInt=function(){},a}(),this.gen()({nextDouble:function(){return this.gen()/2147483647},nextIntRange:function(a,b){return a-=.4999,b+=.4999,Math.round(a+(b-a)*nextDouble())},nextDoubleRange:function(a,b){return a+(b-a)*nextDouble()},gen:function(){var a;return a=a*16807%2147483647}}),MG.lib.Point=function(){function a(a,b,c){this._x=a,this._y=b,this._z=c}return a}(),MG.lib.graph.Center=function(){function b(){}var a;return a=function(){return this.index=null,this.point=null,this.water=null,this.ocean=null,this.coast=null,this.biome=null,this.elevation=null,this.moisture=null,this.neighbours=[],this.borders=[],this.corners=[]},b}(),MG.lib.graph.Corner=function(){function b(){}var a;return a=function(){return this.index=null,this.point=null,this.water=null,this.ocean=null,this.coast=null,this.biome=null,this.elevation=null,this.moisture=null,this.touches=[],this.protrudes=[],this.adjacent=[],this.river=null,this.downslope=null,this.watershed=null,this.watershed_size=null},b}(),MG.lib.graph.Edge=function(){function b(){}var a;return a=function(){return this.index=null,this.d0=null,this.d1=null,this.v1=null,this.v2=null,this.midpoint=null,this.river=null},b}(),MG.lib.Map=function(){function j(a){this._size=a,this.numPoints=1,this.reset()}var a,b,c,d,e,f,g,h,i;return j.LAKE_THRESHOLD=.3,d=null,e=new PMPRNG,f=null,h=null,g=null,i=[],a=[],b=[],c=[],j.prototype.newIsland=function(a,b,c,d){return this.islandShape=IslandShape["make"+a](c),this.pointSelector=PointSelector["generate"+pointType](SIZE,c),this.needsMoreRandomness=PointSelector.needsMoreRandomness(pointType),this.numPoints=b,this.mapRandom.seed=d},j.prototype.reset=function(){var a,d,e,f,g,h,i,j,k,l,m;this.points&&this.points.splice(0,this.points.length);if(this.edges){for(f=0,i=c.length;f<i;f++)e=c[f],e.d0=e.d1=null,e.v0=e.v1=null;this.edges.splice(0,this.edges.length)}if(this.centers){l=this.centers;for(g=0,j=l.length;g<j;g++)a=l[g],a.neighbors.splice(0,a.neighbors.length),a.corners.splice(0,a.corners.length),a.borders.splice(0,a.borders.length);this.centers.splice(0,this.centers.length)}if(this.corners){m=this.corners;for(h=0,k=m.length;h<k;h++)d=m[h],d.adjacent.splice(0,q.adjacent.length),d.touches.splice(0,q.touches.length),d.protrudes.splice(0,q.protrudes.length),d.downslope=null,d.watershed=null;this.corners.splice(0,b.length)}this.points||(this.points=[]),this.edges||(this.edges=[]),this.centers||(this.centers=[]);if(!this.corners)return this.corners=[]},j.prototype.go=function(a,b){var c,d,e=this;return c=[],d=function(a,b){var c;return c=getTimer(),b()},c.push(["Placing points...",function(){return e.reset(),e.points=e.pointSelector(e.numPoints)}]),c.push(["Build graph...",function(){var a;return a=new Voronoi(e.points,null,new Rectangle(0,0,e._size,e._size)),e.buildGraph(e.points,a),e.improveCorners(),e.voronoi.dispose(),e.voronoi=null,e.points=null}])},j}()})).call(this)